[2025-11-15 00:50:40,595] INFO: Task received by worker
[2025-11-15 00:50:40,597] INFO: Starting task: AI Product Analyzer
[2025-11-15 00:50:40,597] DEBUG: Input data: {
  "AI_MODEL": "claude"
}
[2025-11-15 00:50:40,691] INFO: CLI Processor initialized
[2025-11-15 00:50:40,691] INFO: STARTING PRODUCT PROCESSING PIPELINE
[2025-11-15 00:50:40,691] INFO: STAGE 1: IMPORTING DATA
[2025-11-15 00:50:40,692] INFO: ✅ Successfully imported 10 products from JSON
[2025-11-15 00:50:40,692] INFO: STAGE 2-3: PROCESSING PRODUCTS (TITLE GENERATION + PRICE FETCHING)
[2025-11-15 00:50:40,692] INFO: [1/10] Processing: Canon Printer Cartridge Pixma 561 XL
[2025-11-15 00:50:40,692] INFO: → Generating AI title...
[2025-11-15 00:50:48,268] ERROR: Error generating title: name 'excluded_products' is not defined
Traceback (most recent call last):
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 45, in generate_title
    return self._parse_response(product, response, original_title)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 201, in _parse_response
    f"Products: validated: {len(validated_subproducts)}, excluded: {len(excluded_products)})"
                                                                        ^^^^^^^^^^^^^^^^^
NameError: name 'excluded_products' is not defined. Did you mean: 'excluded_product'?
[2025-11-15 00:50:48,269] INFO: → Fetching Amazon prices for sub-products...
[2025-11-15 00:50:48,269] WARNING: No sub-products identified, skipping price fetch
[2025-11-15 00:50:48,270] INFO: [2/10] Processing: Two Empty Ink Canon Printer Cartridges . (Collect Brentford Tw8 0de)
[2025-11-15 00:50:48,270] INFO: → Generating AI title...
[2025-11-15 00:50:53,781] ERROR: Error generating title: name 'excluded_products' is not defined
Traceback (most recent call last):
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 45, in generate_title
    return self._parse_response(product, response, original_title)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 201, in _parse_response
    f"Products: validated: {len(validated_subproducts)}, excluded: {len(excluded_products)})"
                                                                        ^^^^^^^^^^^^^^^^^
NameError: name 'excluded_products' is not defined. Did you mean: 'excluded_product'?
[2025-11-15 00:50:53,784] INFO: → Fetching Amazon prices for sub-products...
[2025-11-15 00:50:53,784] WARNING: No sub-products identified, skipping price fetch
[2025-11-15 00:50:53,784] INFO: [3/10] Processing: Canon Printer Cartridge XL 540
[2025-11-15 00:50:53,784] INFO: → Generating AI title...
[2025-11-15 00:51:05,444] ERROR: Error generating title: name 'excluded_products' is not defined
Traceback (most recent call last):
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 45, in generate_title
    return self._parse_response(product, response, original_title)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 201, in _parse_response
    f"Products: validated: {len(validated_subproducts)}, excluded: {len(excluded_products)})"
                                                                        ^^^^^^^^^^^^^^^^^
NameError: name 'excluded_products' is not defined. Did you mean: 'excluded_product'?
[2025-11-15 00:51:05,447] INFO: → Fetching Amazon prices for sub-products...
[2025-11-15 00:51:05,447] WARNING: No sub-products identified, skipping price fetch
[2025-11-15 00:51:05,456] INFO: [4/10] Processing: Brand new canon printer and cartridges
[2025-11-15 00:51:05,456] INFO: → Generating AI title...
[2025-11-15 00:51:12,187] ERROR: Error generating title: name 'excluded_products' is not defined
Traceback (most recent call last):
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 45, in generate_title
    return self._parse_response(product, response, original_title)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 201, in _parse_response
    f"Products: validated: {len(validated_subproducts)}, excluded: {len(excluded_products)})"
                                                                        ^^^^^^^^^^^^^^^^^
NameError: name 'excluded_products' is not defined. Did you mean: 'excluded_product'?
[2025-11-15 00:51:12,189] INFO: → Fetching Amazon prices for sub-products...
[2025-11-15 00:51:12,190] WARNING: No sub-products identified, skipping price fetch
[2025-11-15 00:51:12,198] INFO: [5/10] Processing: Canon Ink cartridges mixed bundle-open to offers
[2025-11-15 00:51:12,198] INFO: → Generating AI title...
[2025-11-15 00:51:25,320] ERROR: Error generating title: name 'excluded_products' is not defined
Traceback (most recent call last):
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 45, in generate_title
    return self._parse_response(product, response, original_title)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 201, in _parse_response
    f"Products: validated: {len(validated_subproducts)}, excluded: {len(excluded_products)})"
                                                                        ^^^^^^^^^^^^^^^^^
NameError: name 'excluded_products' is not defined. Did you mean: 'excluded_product'?
[2025-11-15 00:51:25,324] INFO: → Fetching Amazon prices for sub-products...
[2025-11-15 00:51:25,324] WARNING: No sub-products identified, skipping price fetch
[2025-11-15 00:51:25,332] INFO: [6/10] Processing: Canon Printer Cartridges
[2025-11-15 00:51:25,333] INFO: → Generating AI title...
[2025-11-15 00:51:37,343] ERROR: Error generating title: name 'excluded_products' is not defined
Traceback (most recent call last):
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 45, in generate_title
    return self._parse_response(product, response, original_title)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 201, in _parse_response
    f"Products: validated: {len(validated_subproducts)}, excluded: {len(excluded_products)})"
                                                                        ^^^^^^^^^^^^^^^^^
NameError: name 'excluded_products' is not defined. Did you mean: 'excluded_product'?
[2025-11-15 00:51:37,345] INFO: → Fetching Amazon prices for sub-products...
[2025-11-15 00:51:37,345] WARNING: No sub-products identified, skipping price fetch
[2025-11-15 00:51:37,353] INFO: [7/10] Processing: 5 x Canon Pixma multipack printer cartridges
[2025-11-15 00:51:37,353] INFO: → Generating AI title...
[2025-11-15 00:51:42,931] ERROR: Error generating title: name 'excluded_products' is not defined
Traceback (most recent call last):
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 45, in generate_title
    return self._parse_response(product, response, original_title)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 201, in _parse_response
    f"Products: validated: {len(validated_subproducts)}, excluded: {len(excluded_products)})"
                                                                        ^^^^^^^^^^^^^^^^^
NameError: name 'excluded_products' is not defined. Did you mean: 'excluded_product'?
[2025-11-15 00:51:42,934] INFO: → Fetching Amazon prices for sub-products...
[2025-11-15 00:51:42,934] WARNING: No sub-products identified, skipping price fetch
[2025-11-15 00:51:42,942] INFO: [8/10] Processing: FS: Brand New Sealed Genuine Canon Cartridge 312 Printer Black Toner for LBP3050 LBP3100 LBP3150
[2025-11-15 00:51:42,943] INFO: → Generating AI title...
[2025-11-15 00:51:52,147] ERROR: Error generating title: name 'excluded_products' is not defined
Traceback (most recent call last):
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 45, in generate_title
    return self._parse_response(product, response, original_title)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 201, in _parse_response
    f"Products: validated: {len(validated_subproducts)}, excluded: {len(excluded_products)})"
                                                                        ^^^^^^^^^^^^^^^^^
NameError: name 'excluded_products' is not defined. Did you mean: 'excluded_product'?
[2025-11-15 00:51:52,151] INFO: → Fetching Amazon prices for sub-products...
[2025-11-15 00:51:52,151] WARNING: No sub-products identified, skipping price fetch
[2025-11-15 00:51:52,159] INFO: [9/10] Processing: Canon Ink Cartridges
[2025-11-15 00:51:52,159] INFO: → Generating AI title...
[2025-11-15 00:51:58,706] ERROR: Error generating title: name 'excluded_products' is not defined
Traceback (most recent call last):
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 45, in generate_title
    return self._parse_response(product, response, original_title)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/akhliddin/Desktop/ScriptifyBackend/apps/scripts/ai_product_analyzer/title_generator.py", line 201, in _parse_response
    f"Products: validated: {len(validated_subproducts)}, excluded: {len(excluded_products)})"
                                                                        ^^^^^^^^^^^^^^^^^
NameError: name 'excluded_products' is not defined. Did you mean: 'excluded_product'?
[2025-11-15 00:51:58,712] INFO: → Fetching Amazon prices for sub-products...
[2025-11-15 00:51:58,712] WARNING: No sub-products identified, skipping price fetch
[2025-11-15 00:51:58,721] INFO: [10/10] Processing: Canon imageprograf PRO-300 printer
[2025-11-15 00:51:58,721] INFO: → Generating AI title...
